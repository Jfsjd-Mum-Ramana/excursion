🔹 Changes for NexusScheduler (Java 21 Virtual Threads)

1️⃣ Update ExecutorService Initialization in @PostConstruct

Replace:

this.executorService = Executors.newFixedThreadPool(threadPoolSize);

With:

this.executorService = Executors.newVirtualThreadPerTaskExecutor();


---

2️⃣ Update Device Processing to Use Thread.ofVirtual()

Replace:

executorService.submit(() -> {
    try {
        nexusService.getNexusData(device);
    } catch (Exception e) {
        logger.error("Exception while processing device: {}", device, e);
    }
});

With:

Thread.ofVirtual().start(() -> {
    try {
        nexusService.getNexusData(device);
    } catch (Exception e) {
        logger.error("Exception while processing device: {}", device, e);
    }
});


---

🔹 Required Imports (No Changes Needed)

import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;


---

✅ Summary of Changes

Replaced Executors.newFixedThreadPool(threadPoolSize) → Executors.newVirtualThreadPerTaskExecutor()

Replaced executorService.submit(...) → Thread.ofVirtual().start(...)


Now your NexusScheduler fully supports Java 21 Virtual Threads. 🚀

